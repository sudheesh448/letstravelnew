{% extends 'adminpages/baseadmin.html' %}

{% block title %}Edit Coupon{% endblock title %}

{% block content %}
<div class="col-12 grid-margin">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title text-danger">Edit Coupon</h4>
      <form method="post" action="{% url 'edit_coupon' coupon.id %}">
        {% csrf_token %}
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="code">Code</label>
            <input type="text" class="form-control" id="code" name="code" value="{{ coupon.code }}" required>
          </div>
          <div class="form-group col-md-6">
            <label for="discount">Discount</label>
            <input type="number" class="form-control" id="discount" name="discount" value="{{ coupon.discount }}" required>
          </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
              <label for="expiry_date">Expiry Date</label>
              <input type="date" class="form-control" id="id_expiry_date" name="expiry_date" value="{{ formatted_expiry_date }}" required>
            </div>
            <div class="form-group col-md-6">
              <label for="available">Available</label>
              <input type="number" class="form-control" id="available" name="available" value="{{ coupon.available }}" required>
            </div>
          </div>
          
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="is_percentage">Is Percentage</label>
            <div class="form-check">
              <input type="checkbox" class="form-check-input checkbox-lg" id="is_percentage" name="is_percentage" {% if coupon.is_percentage %}checked{% endif %}>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="min_order_total">Min Order Total</label>
            <input type="number" class="form-control" id="min_order_total" name="min_order_total" value="{{ coupon.min_order_total }}">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="max_discount_amount">Max Discount Amount</label>
            <input type="number" class="form-control" id="max_discount_amount" name="max_discount_amount" value="{{ coupon.max_discount_amount }}">
          </div>
          <!-- Add other fields as needed -->
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
      </form>
    </div>
  </div>
</div>
<script>
    // Disable past dates in the expiry_date field
    var today = new Date().toISOString().split("T")[0];
    document.getElementById("id_expiry_date").setAttribute("min", today);
  </script>
{% endblock %}
