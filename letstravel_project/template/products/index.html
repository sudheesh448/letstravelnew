{% extends 'products/productbase.html' %} 
{%load static%}
{% block title %} Home {% endblock title %}

{% block content %}
<style>
	/* Default styles for the carousel */
.carousel-inner {
  height: 80vh; /* Set the desired height for the carousel (80% of the viewport height) */
}

.carousel-image {
  height: 100%;
  object-fit: cover; /* This will scale the images proportionally to cover the entire container */
}

/* Custom styles for mobile view (screens with width <= 768px) */
@media (max-width: 768px) {
  .carousel-inner {
    height: 50vh; /* Adjust the height for mobile view (50% of the viewport height) */
  }
}

  </style>
  
<link rel="stylesheet" type="text/css" href="{% static 'products/css/products.css' %}">
	<!-- Slider -->
	<section class="section-slide">
		<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
		  <div class="carousel-inner">
			<div class="carousel-item active">
			  <img class="d-block w-100 carousel-image" src="{% static 'images/caurosil/pxfuel.jpg' %}" alt="First slide">
			</div>
			<div class="carousel-item">
			  <img class="d-block w-100 carousel-image" src="{% static 'images/caurosil/pxfuel (1).jpg' %}" alt="Second slide">
			</div>
			<div class="carousel-item">
			  <img class="d-block w-100 carousel-image" src="{% static 'images/caurosil/pxfuel (2).jpg' %}" alt="Third slide">
			</div>
		  </div>
		  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="sr-only">Previous</span>
		  </a>
		  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="sr-only">Next</span>
		  </a>
		</div>

		
	  </section>

	  
	  


	<!-- Banner -->
	<div class="sec-banner bg0 p-t-20 p-b-30">
		<div class="container">
			<div class="row">
				

				<div class="col-md-4 col-4 col-lg-4 p-b-20 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/speaker.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Electronics
								  </span>
								  

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-4 col-lg-4  col-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/umbrella.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Travel Gear
								</span>

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-4 col-lg-4  col-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/tracksuit.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Travel clothing
								</span>

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>

			<div class="row">
				

				<div class="col-md-4 col-lg-4  col-4 p-b-20 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/speaker.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Electronics
								</span>

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-4 col-lg-4  col-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/umbrella.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Travel Gear
								</span>

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-4 col-lg-4  col-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="{%static 'images/product-slide/tracksuit.webp'%}" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class=" block1-name  trans-04 p-b-8 text-sm font-weight-bold">
									Travel clothing
								</span>

								<span class="block1-info stext-102 trans-04">
									
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	


	<!-- Product -->
	<section class="bg0 p-t-15 p-b-60">
		<div class="container">
			<div class="p-b-10 row">
				<h3 class="ltext-103 cl5">
					Product Overview
				</h3>
				<div class="ml-auto"> <!-- Use "ml-auto" class to push the search element to the right -->
					<div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
						<i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
						<i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none "></i>
						<p class="text-dark">Search</p>
					</div>
				</div>
			</div>
			<div class="flex-w flex-sb-m p-b-52">
	
				<!-- Search product -->
				<div class="dis-none panel-search w-full p-t-10 p-b-15">
					<form id="search-form" method="GET" action="{% url 'home' %}">
						<div class="bor8 dis-flex p-l-15">
							<button type="submit" class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
								<i class="zmdi zmdi-search"></i>
							</button>
				
							<input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="query" id="search-input" placeholder="Search">
						</div>
					</form>
				</div>
			</div>

			<div class="row isotope-grid ">

				{% if products %}
    {% for product in products %}
        {% with product_variant=product.productvariant_set.all|random %}
            {% with product_color=product_variant.productvariantcolor_set.first %}
                {% with product_image=product_color.productimage_set.first %}
                    {% if product_image %}
					{% if  product_color.stock > 0 %}
                        <div class="col-6 col-md-4 col-lg-2 p-b-35 isotope-item bg-white-background-with-shadow">
                            <!-- Block2 -->
                            <div class="block2">
                                <div class="block2-pic hov-img0">
                                    <img src="{{ product_image.image.url }}" alt="Product Image" class="blockimage">
                                    <a href="{{ product_color.get_absolute_url}}" class="block2-btn flex-c-m  cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 ">
                                        Quick View
                                    </a>
                                </div>
                                <div class="block2-txt flex-w flex-t p-t-14 ">
                                    <div class="block2-txt-child1 flex-col-l">
                                        <a href="{{ product_color.get_absolute_url }}" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6 text-dark font-weight-bold">
                                            {{ product.name }}
                                        </a>
                                        <div class="row mx-0">
                                            <span class="cl3 small text-dark font-weight-bold">
                                                {{ product_variant.variant }}
                                            </span>
                                            <span class="cl3 mx-3 small text-dark font-weight-bold">
                                                {{ product_color.color_variant.color }}
                                            </span>
                                        </div>
                                        <span class="stext-80">
                                            {% if product_color.on_offer and product_color.offer_price %}
                                                <div class="row mx-0">
                                                    <p><span style="text-decoration: line-through;" class="small">₹{{ product_color.price }}</span></p>
                                                    <p class="mt-1 ml-3 text-danger small font-weight-bold">₹{{ product_color.offer_price }}</p>
                                                </div>
                                            {% else %}
                                                <p class="small mt-1 text-dark font-weight-bold">₹{{ product_color.price }}</p>
                                            {% endif %}
                                        </span>
                                    </div>
									{% if user.is_authenticated %}
                                    <div  class="block2-txt-child2 flex-r p-t-3 mr-0">
										{% if product_color.id in wishlist_items_product_variant_color_ids %}
										  <a href="#" class="remove-from-wishlist dis-block pos-relative js-removedwish-b2" data-product-id="{{ product_color.id }}">
											<img id="heart-icon-{{ product_color.id }}" class="icon-heart2 dis-block trans-04" src="{% static 'images/icon/icon-heart-02.png' %}" alt="ICON" >
										  </a>
										{% else %}
										  <a href="#" class="add-to-wishlist dis-block pos-relative js-addwish-b2" data-product-id="{{ product_color.id }}">
											<img id="heart-icon-{{ product_color.id }}" class="icon-heart1 dis-block trans-04" src="{% static 'images/icon/icon-heart-01.png' %}" alt="ICON">
										  </a>
										{% endif %}
									  </div>
									  {% endif %}
									  
									  
                                </div>
                            </div>
                        </div>
						{% endif %}
                    {% endif %}
                {% endwith %}
            {% endwith %}
        {% endwith %}
    {% endfor %}
{% else %}
    <div class="col-12 text-center">
        <h3>No products available.</h3>
    </div>
{% endif %}


			<!-- Pagination -->
			<!-- Pagination -->
			

		</div>
		<div class="flex-w flex-c-m p-t-45">
			<!-- Previous Page -->
			{% if products.has_previous %}
			<a href="?page={{ products.previous_page_number }}" class="flex-c-m how-pagination1 trans-04 m-all-7">
				<i class="zmdi zmdi-arrow-left"></i>
			</a>
			{% endif %}

			<!-- Page Numbers -->
			{% for page in products.paginator.page_range %}
			<a href="?page={{ page }}" class="flex-c-m how-pagination1 trans-04 m-all-7 {% if products.number == page %}pagination-active{% endif %}">
				{{ page }}
			</a>
			{% endfor %}

			<!-- Next Page -->
			{% if products.has_next %}
			<a href="?page={{ products.next_page_number }}" class="flex-c-m how-pagination1 trans-04 m-all-7">
				<i class="zmdi zmdi-arrow-right"></i>
			</a>
			{% endif %}
		</div>
	</section>

	<script>
		$(document).ready(function () {
		  $('.add-to-wishlist').click(function (event) {
			event.preventDefault();
			const productId = $(this).data('product-id');
	  
			$.ajax({
			  url: '/add_to_wishlist/', // Replace with your Django URL to handle adding to wishlist
			  type: 'POST',
			  data: {
				product_id: productId,
				csrfmiddlewaretoken: '{{ csrf_token }}',
			  },
			  success: function (data) {
				$('#heart-icon-' + productId).removeClass('icon-heart1').addClass('icon-heart2');
				$(this).removeClass('add-to-wishlist').addClass('remove-from-wishlist');
				console.log("success add")
				
			  },
			  error: function (xhr, status, error) {
				console.log("success error")
			  },
			});
		  });
	  
		  $('.remove-from-wishlist').click(function (event) {
			event.preventDefault();
			const productId = $(this).data('product-id');
	  
			$.ajax({
			  url: '/remove_from_wishlist/', // Replace with your Django URL to handle removing from wishlist
			  type: 'POST',
			  data: {
				product_id: productId,
				csrfmiddlewaretoken: '{{ csrf_token }}',
			  },
			  success: function (data) {
				$('#heart-icon-' + productId).removeClass('icon-heart2').addClass('icon-heart1');
				$(this).removeClass('remove-from-wishlist').addClass('add-to-wishlist');
				console.log("remove success")
				
			  },
			  error: function (xhr, status, error) {
				console.log(" remove error")
			  },
			});
		  });

		  function refreshWishlistIcons() {
     	 $('#wishlist-icons-container').load(window.location.href + ' #wishlist-icons-container');
   		 }
		});
	  </script>

	  <script>
		$('.js-removewish-b2').on('click', function(e){
			e.preventDefault();
		});
		$('.js-removedwish-b2').each(function(){
			var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
			$(this).on('click', function(){
				swal(nameProduct, "is removed from wishlist !", "");

				$(this).addClass('js-addedwish-b2');
				$(this).off('click');
			});
		});
	  </script>
	  
  

	{% endblock content %}